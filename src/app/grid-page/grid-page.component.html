<app-slide-show (searchTextChanged)="onSearchTextEntered($event)" ></app-slide-show>

<div style=" border-bottom: 1px solid #000000; height: 48px;">
  <!-- <mat-tab-group class="custom-tab-group" [(selectedIndex)]="selectedTabIndex"
    (selectedTabChange)="handleTabChange($event)">
    <mat-tab label="All"></mat-tab>
    <mat-tab *ngFor="let domain of domains" [label]="domain"></mat-tab>
  </mat-tab-group> -->

  <mat-tab-group class="custom-tab-group" [(selectedIndex)]="selectedTabIndex"
  (selectedTabChange)="handleTabChange($event)">
  <mat-tab label="All ({{ getDomainCount('All') }})"></mat-tab>
  <mat-tab *ngFor="let domain of domains" [label]="getDomainLabel(domain)"></mat-tab>
</mat-tab-group>


  <!-- list and grid buttons -->
  <div id="btnContainer">
    <div>
      <button class="btn" style="width: 35px; position: relative; left: 10px; color: #FF6D43"
        (click)="toggleView('list') ;listView()">
        <img class="vector-logo" style="left: -13px; position: relative; width: 35px; height: 35px;"
          [src]="isListViewActive ? '../assets/format-list-bulleted.png' : 'assets/Vector (3).png'" alt="List View">
      </button>
    </div>

    <span class="separator"><img style="position: relative; left: 10px;" src="assets/Line 1.png"></span>

    <div>
      <button class="btn" style="position: relative; left: 10px; color: #FF6D43"
        (click)="toggleView('grid');gridView()">
        <img class="vector-logo" style="height: 35px; width: 35px;"
          [src]="isListViewActive ? 'assets/Vector22.png' : '../assets/grid.png'" alt="Grid View">
      </button>
    </div>
  </div>
</div>

<!-- toggle -->

<input id="cb_id" class="toggle-round" type="checkbox">
<label for="cb_id"></label>
<label class="CXTowerlabel">CX Tower</label>
<label class="CXTechlabel1">CX Tech</label>

<div class="labels left-side" style="margin-top: -32px; margin-left: 10px; ">
  <button (click)="filterDataBySubDomain('HTML')" style=" 
    border-radius: 50px; width: 100px;
    height: 30px;
    border: 1px solid #FF6D43;" class="label">HTML</button>

  <button  (click)="filterDataBySubDomain('Angular')" 
    class="label">Angular</button>

  <button (click)="filterDataBySubDomain('CSS')" style=" 
    border-radius: 50px; width: 100px;
    height: 30px;
    border: 1px solid #FF6D43;" class="label">CSS</button>
</div>

<div class="labels right-side " style="margin-top: -1px;">
  <button (click)="filterDataBySubDomain('Immersive Design')" style=" 
    border-radius: 50px; width: 160px;
    height: 33px;
    border: 1px solid #FF6D43;" class="label">Immersive Design</button>

  <button (click)="filterDataBySubDomain('Mobile Design')" style=" 
    border-radius: 50px; width: 150px;
    height: 33px;
    border: 1px solid #FF6D43;" class="label">Mobile Design</button>

  <button (click)="filterDataBySubDomain('UI Dev')" style=" 
    border-radius: 50px; width: 120px;
    height: 33px;
    border: 1px solid #FF6D43;" class="label">UI Dev</button>

  <button (click)="filterDataBySubDomain('Analytics')" style=" 
    border-radius: 50px; width: 130px;
    height: 33px;
    border: 1px solid #FF6D43;" class="label">Analytics</button>
</div>
<div>

  <!-- sortby dropdown -->
  <!-- <button class="sortby" (click)="toggleDropdown()">
  <svg xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px; margin-top: 1px;" width="14" height="14"
    viewBox="0 0 14 14" fill="none">
    <path
      d="M0.186163 1.40875C1.9633 3.675 5.24485 7.875 5.24485 7.875V13.125C5.24485 13.6062 5.64075 14 6.12463 14H7.88417C8.36805 14 8.76394 13.6062 8.76394 13.125V7.875C8.76394 7.875 12.0367 3.675 13.8138 1.40875C14.2625 0.83125 13.849 0 13.1188 0H0.881183C0.150972 0 -0.262521 0.83125 0.186163 1.40875Z"
      fill="black" />
  </svg> -->
  <!-- <label class="labSortby">Sort by</label> -->
  <!-- <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="11" viewBox="0 0 16 11" fill="none">
    <path d="M1.88 0L8 6.39898L14.12 0L16 1.96999L8 10.3529L0 1.96999L1.88 0Z" fill="black" />
  </svg> -->
  <!-- Dropdown content -->
  <!-- <ul class="dropdown-content" [ngStyle]="{ 'display': dropdownOpen ? 'block' : 'none' }">
    <li>{{sortBy[0].list}}</li>
    <li>{{sortBy[1].list}}</li>
    <li>{{sortBy[2].list}}</li>
    <li>{{sortBy[3].list}}</li> -->
  <!-- Add more options as needed -->
  <!-- </ul> -->
  <!-- SVG to show when the dropdown is open -->
  <!-- <svg *ngIf="dropdownOpen" xmlns="http://www.w3.org/2000/svg" width="16" height="11" viewBox="0 0 16 11" fill="none">
    <path d="M1.88 10.3529L8 3.95392L14.12 10.3529L16 8.38291L8 -3.62396e-05L0 8.38291L1.88 10.3529Z" fill="black" />
  </svg>
</button> -->

  <br>
  <div class="row" id="content" #content >
    <ng-container *ngFor="let item of paginatedData">

      <div class="column" [ngClass]="{ 'list-view': !isGridView }"
        *ngIf="searchText === '' || item.details.title ?.toLowerCase().includes(searchText)">
        <div class="divpadding" [ngClass]="{ 'column-list': !isGridView}">
          <img class="img-fluid" [src]="item.details.itemIcon.url" style="object-fit: contain;"
            [src]="item.details.itemIcon.url" [ngClass]="{'grid-image': isGridView, 'list-image': !isGridView}"
            [routerLink]="['/case_study', item.details.sys.id]">
          <div style="margin-left: 10px;">
            <h4 [ngClass]="{'grid-text': isGridView, 'list-text': !isGridView}">{{ item.details.title }}</h4>
            <!-- date -->
            <p *ngIf="isGridView" [ngClass]="{ 'list-text1': !isGridView, 'grid-text2': isGridView }">
              Published on <strong>{{ item.details.publishedOnDate | date: 'dd-MM-yyyy' :'UTC' }}</strong>
            </p>
            <!-- description -->
            <p *ngIf="!isGridView" [ngClass]="{'grid-text1': isGridView, 'list-text1': !isGridView}">
              {{ item.details.description}}
            </p>
            <div [ngClass]="{'grid-text1': isGridView, 'list-text1': !isGridView}">



              <!-- <button style="display: inline-block; margin-right: 20px;  border: none; background-color: white;"
                class="Comments_btn"><img src="../assets/question-answer.png" style="width: 35px;height: 35px;"
                  alt="Comments"> 11
                Comments</button>
              <button style="display: inline-block; margin-right: 20px; border: none; background-color: white;"
                (click)="toggleLike(contentId, userId)" class="like_btn"><img src="../assets/Vector-t.png" alt="Likes"
                  style="width: 30px;height: 30px;"> {{ likesCount }}</button> -->




              <!-- like and comment for grid -->
              <!-- Comment Button -->
              <button *ngIf="isGridView"
                style="display: inline-block; margin-right: 20px; border: none; background-color: white;"
                class="Comments_btn">
                <img [src]="logoCollection[4].logo.url" class="icons" alt="Comments">
                11 Comments
              </button>

              <!-- Like Button -->
              <button *ngIf="isGridView"
                style="display: inline-block; margin-right: 20px; border: none; background-color: white;"
                (click)="toggleLike(contentId, userId)" class="like_btn">
                <img [src]="logoCollection[7].logo.url" alt="Likes" class="icons">
                {{ likesCount }}
              </button>



              <!-- like and comment btn for list -->
              <button *ngIf="!isGridView" class="like_comment"
                style="display: inline-block; margin-right: 20px; border: none; background: none;" class="Comments_btn">
                <img [src]="logoCollection[4].logo.url" class="icons" alt="Comments">
                11 Comments
              </button>

              <!-- Like Button from list view -->
              <button *ngIf="!isGridView"
                style="display: inline-block; margin-right: 20px; border: none; background:none;"
                (click)="toggleLike(contentId, userId)" class="like_btn">
                <img [src]="logoCollection[7].logo.url" alt="Likes" class="icons">
                {{ likesCount }}
              </button>
              <div style=" display: inline-block;" *ngIf="isGridView">

                <button (click)="openPopup() " style="border: none; background-color: white;"> <img class="icons"
                    [src]="logoCollection[5].logo.url"></button>
                <!-- popop share -->
                <div [hidden]="!showPopup" class="popup-container">
                  <div class="popup-content">
                    <button class="popup-button" (click)="handleEmailShare('item.details.sys.id')">
                      <i class="fab fa-linkedin fa-2x" style="color: #0077B5;"></i>
                      <span class="button-label">Share on LinkedIn</span>
                    </button>
                    <button class="popup-button" (click)="handleLinkedInSharee('item.details.sys.id')">
                      <i class="far fa-envelope fa-2x" style="color: #666;"></i>
                      <span class="button-label">Share via Email</span>
                    </button>
                    <button class="popup-button close-button" (click)="closePopup()">Close</button>
                    <!-- Add "close-button" class -->
                  </div>
                </div>

                <!-- downlaod btn -->
                <button (click)="makePDF()" style="border: none; background-color: white;" class="download_btn"> <svg
                    xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 29 28" fill="none">
                    <path
                      d="M22.9583 15.1667V21C22.9583 21.6417 22.4146 22.1667 21.75 22.1667H7.25C6.58542 22.1667 6.04167 21.6417 6.04167 21V15.1667C6.04167 14.525 5.49792 14 4.83333 14C4.16875 14 3.625 14.525 3.625 15.1667V22.1667C3.625 23.45 4.7125 24.5 6.04167 24.5H22.9583C24.2875 24.5 25.375 23.45 25.375 22.1667V15.1667C25.375 14.525 24.8313 14 24.1667 14C23.5021 14 22.9583 14.525 22.9583 15.1667ZM15.7083 14.7817L17.98 12.5883C18.4513 12.1333 19.2125 12.1333 19.6838 12.5883C20.155 13.0433 20.155 13.7783 19.6838 14.2333L15.3458 18.4217C14.8746 18.8767 14.1133 18.8767 13.6421 18.4217L9.30417 14.2333C8.83292 13.7783 8.83292 13.0433 9.30417 12.5883C9.77542 12.1333 10.5367 12.1333 11.0079 12.5883L13.2917 14.7817V4.66667C13.2917 4.025 13.8354 3.5 14.5 3.5C15.1646 3.5 15.7083 4.025 15.7083 4.66667V14.7817Z"
                      fill="#FF6D43" />
                  </svg>
                </button>
              </div>
            </div>



            <div *ngIf="!isGridView" [ngClass]="{'grid-text1': isGridView, 'list-text1': !isGridView}">
              <div class="share" style="margin-top: 40px;">

                <!-- share icon list view -->
                <img [src]="logoCollection[5].logo.url" class="icons">
                <!-- download icon list view -->
                <img [src]="logoCollection[6].logo.url" class="icons">
                <!-- like icon list view -->
                <img [src]="logoCollection[7].logo.url" class="icons">
                <!-- comment icon list view -->
                <img [src]="logoCollection[4].logo.url" class="icons">

                <p [ngClass]="{'grid-text1': isGridView, 'list-text1': !isGridView}"
                  style="float: right;margin-top: -10px;">
                  Published on <br><strong>{{ item.details.publishedOnDate | date: 'dd-MM-yyyy' :'UTC' }}</strong>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

  </div>


  <!-- pagination -->
  <div class="pagination">
    <button [disabled]="currentPage === 1" class="pagination-button" (click)="changePage(-1)">Previous</button>
    <span class="pagination-info">{{ currentPage }} / {{ totalPages }}</span>
    <button [disabled]="currentPage === totalPages" class="pagination-button" (click)="changePage(1)">Next</button>
  </div>

  <div *ngIf="isGridView">
    <app-testimonial2></app-testimonial2>
  </div>

  <app-footer></app-footer>